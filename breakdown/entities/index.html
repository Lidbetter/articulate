<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Entities - Articulate</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Entities";
    var mkdocs_page_input_path = "breakdown/entities.md";
    var mkdocs_page_url = "/breakdown/entities/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Articulate</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Introduction</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Guides</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../guides/setup/">Setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../guides/getting-started/">Getting Started</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Breakdown</span>
    <ul class="subnav">
                <li class=" current">
                    
    <a class="current" href="./">Entities</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#attributes">Attributes</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#magic-properties">Magic Properties</a></li>
        
            <li><a class="toctree-l4" href="#getters-setters">Getters &amp; Setters</a></li>
        
            <li><a class="toctree-l4" href="#manual">Manual</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#dynamic-computed-attributes">Dynamic &amp; Computed Attributes</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#dynamic-attributes">Dynamic Attributes</a></li>
        
            <li><a class="toctree-l4" href="#computed-attributes">Computed Attributes</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#state">State</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#persisted-state">Persisted State</a></li>
        
            <li><a class="toctree-l4" href="#dirty-state">Dirty State</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../mappers/">Mappers</a>
                </li>
                <li class="">
                    
    <a class="" href="../mappings/">Mappings</a>
                </li>
                <li class="">
                    
    <a class="" href="../attributes/">Attributes</a>
                </li>
                <li class="">
                    
    <a class="" href="../repositories/">Repostiories</a>
                </li>
                <li class="">
                    
    <a class="" href="../sources/">Sources</a>
                </li>
                <li class="">
                    
    <a class="" href="../components/">Components</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sources</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../sources/illuminate/">Illuminate</a>
                </li>
                <li class="">
                    
    <a class="" href="../../sources/respite/">Respite</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Articulate</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Breakdown &raquo;</li>
        
      
    
    <li>Entities</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Entities could be considered Articulates answer to models, but in essence, they're nothing more than simple data objects.
Each entity represents a resource, and contains a particular part of a dataset.</p>
<p>All of Articulates entities extend the following class;</p>
<pre><code>Sprocketbox\Articulate\Entities\Entity
</code></pre>
<p>This class by default provides attribute handling, as well as a few magic methods so that your data can be accessed
as entity properties. A fully functioning example entity would be as follows;</p>
<pre><code class="php">namespace App\Entities;

use Sprocketbox\Articulate\Entities\Entity;

class MyEntity extends Entity {
}
</code></pre>

<p>All of the attributes are provided by the <a href="../../mappers">mapper</a> and generated <a href="../../mapping">mapping</a> so nothing more is needed.
Since most IDEs have problems with magic properties, it is always worth adding a docblock to help it out;</p>
<pre><code class="php">namespace App\Entities;

use Sprocketbox\Articulate\Entities\Entity;

/**
 * Class MyEntity
 *
 * @property-read int       $id
 * @property string         $name
 * @property string         $description
 * @property \Carbon\Carbon $createdAt
 * @property \Carbon\Carbon $updatedAt
 *
 * @package App\Entities
 */
class MyEntity extends Entity {
}
</code></pre>

<h1 id="attributes">Attributes</h1>
<p>There are several ways for you to interact with your entities attributes.</p>
<h2 id="magic-properties">Magic Properties</h2>
<p>By default, all attributes are available as magic properties, so you don't need to do anything special to get them working.</p>
<p>Internally, the code handling magic properties will hook into any getters and or setters you happen to create.</p>
<h2 id="getters-setters">Getters &amp; Setters</h2>
<p>If you wish to create getters or setters for particular attributes, you can do so by StudlyCasing the attribute names, and
prefixed with <code>get</code> or <code>set</code>, like below;</p>
<pre><code class="php">public function getName(): string {
    return $this-&gt;getAttribute('name');
}

public function setName(string $name): self {
    return $this-&gt;&gt;setAttribute('name', $name);
}

public function getCreatedAt(): Carbon {
    return $this-&gt;getAttribute('created_at');
}

public function setCreatedAt(Carbon $createdAt): self {
    return $this-&gt;&gt;setAttribute('created_at', $createdAt);
}
</code></pre>

<p>If you wish to get or set an attribute on entity, but don't want to actually call the getter or setter, you can use the
<code>get</code> and <code>set</code> methods like so;</p>
<pre><code class="php">$entity-&gt;get('name');
$entity-&gt;set('name', $name);
$entity-&gt;get('created_at');
$entity-&gt;set('created_at', $createdAt);
</code></pre>

<p>This methods will check for the existence of getter and/or setter, before defaulting the next method. It is important to not use
these methods inside your getters and setters, otherwise you'll create an nice little infinite loop.</p>
<h2 id="manual">Manual</h2>
<p>If you wish to manually set or get an attribute, skipping and getters or setters, you can use the <code>getAttribute</code> and <code>setAttribute</code>
methods like so;</p>
<pre><code class="php">$entity-&gt;getAttribute('name');
$entity-&gt;setAttribute('name', $name);
$entity-&gt;getAttribute('created_at');
$entity-&gt;setAttribute('created_at', $createdAt);
</code></pre>

<h1 id="dynamic-computed-attributes">Dynamic &amp; Computed Attributes</h1>
<p>In theory, once you have an instance of entity, you can get and set as many attributes as you wish, though only those mapped
via the <a href="../../mappers">mapper</a> (and of those, only those that aren't marked as dynamic or immutable) will be persisted to the data source.</p>
<h2 id="dynamic-attributes">Dynamic Attributes</h2>
<p>Dynamic attributes can either be set without a mapping, or if you wish to make use of attribute casting, you can use the <code>setDynamic()</code>
method on the attribute mapping.</p>
<h2 id="computed-attributes">Computed Attributes</h2>
<p>Computed attributes aren't entirely that different to dynamic, except that they will typically return a value using one or more
of the existing attributes. If you had an entity with <code>title</code>, <code>first_name</code> and <code>last_name</code> attributes, you could add the following getter;</p>
<pre><code class="php">public function getName(): string {
    return $this-&gt;title . ' ' . $this-&gt;first_name . ' ' . $this-&gt;last_name;
}
</code></pre>

<p>Now you could call <code>$entity-&gt;getName()</code> or even <code>$entity-&gt;name</code> rather than having to build up the name from its parts manually.</p>
<h1 id="state">State</h1>
<p>An entity has three states, persisted, not persisted and dirty.</p>
<h2 id="persisted-state">Persisted State</h2>
<p>All entities have a persisted state, which can be checked by calling <code>isPersisted()</code> which returns a boolean. If for some reason you wanted
to set an entity as persisted manually, you could also call <code>setPersisted()</code>.</p>
<p>An entity with a persisted state would typically cause a source to update the resource, where as a none
persisted entity would cause it to create the resource.</p>
<h2 id="dirty-state">Dirty State</h2>
<p>Entities store the state of each attribute, so that when you set one, it is marked as dirty. This can be used by the
sources so that they do not attempt to persist an entity that hasn't changed.</p>
<p>You can check whether an entity is dirty by calling <code>isDirty()</code>, and check whether a particular attribute is dirty by calling
<code>isDirty('attribute_name')</code>, both of which return a boolean.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../mappers/" class="btn btn-neutral float-right" title="Mappers">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../guides/getting-started/" class="btn btn-neutral" title="Getting Started"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../guides/getting-started/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../mappers/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
